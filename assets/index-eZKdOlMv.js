import{R as f}from"./kaplay-DTLyooHV.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const u=f({global:!1,width:600,height:400,letterbox:!0,background:"#74dcf6",crisp:!0,scale:2,debug:!0,debugKey:"`",buttons:{left:{keyboard:["left","a"],gamepad:["west"]},right:{keyboard:["right","d"],gamepad:["east"]},jump:{keyboard:["space","up","w"],gamepad:["south"]}}}),m={maxRunSpeed:300,accelGround:300,accelAir:150,decelGround:600,decelAir:300,jumpForce:400,minRunAnimSpeed:1,maxRunAnimSpeed:2};u.loadSprite("player","/sprites/characters/bobr.gif",{sliceX:5,sliceY:4,anims:{idle:{from:0,to:0},walk:{from:5,to:8,speed:10,loop:!0},jump:{from:10,to:10},fall:{from:10,to:10}}});function h(e,i=e.vec2(100,100),n){const o={...m,...n},t=e.add([e.sprite("player",{anim:"idle"}),e.pos(i),e.area({shape:new e.Rect(e.vec2(3,0),20,31)}),e.body(),e.anchor("bot"),e.state("idle",["idle","walk","jump","fall"]),{id:"playerCtrl",vx:0,get moveDirection(){return(e.isButtonDown("right")?1:0)+(e.isButtonDown("left")?-1:0)}}]);e.onButtonPress(["jump"],()=>{t.isGrounded()&&r()}),t.onUpdate(()=>{const s=e.dt(),d=t.isGrounded(),l=t.moveDirection;if(l!==0){let c=d?o.accelGround:o.accelAir;Math.sign(l)!==Math.sign(t.vx)&&(c+=d?o.decelGround:o.decelAir),t.vx=g(t.vx,l*o.maxRunSpeed,c*s)}else{const c=d?o.decelGround:o.decelAir,p=Math.max(0,Math.abs(t.vx)-c*s);t.vx=p*Math.sign(t.vx)}if(t.move(t.vx,0),t.flipX=l<0?!0:l>0?!1:t.flipX,t.area.scale.x=t.flipX?-1:1,d?Math.abs(t.vx)>5?a("walk"):a("idle"):t.vel.y<0?a("jump"):a("fall"),t.getCurAnim()?.name==="walk"){const c=e.clamp(Math.abs(t.vx)/o.maxRunSpeed,0,1);t.animSpeed=e.lerp(o.minRunAnimSpeed,o.maxRunAnimSpeed,c)}});function r(){t.jump(o.jumpForce),a("jump")}function a(s){t.getCurAnim()?.name!==s&&t.play(s)}return t}function g(e,i,n){const o=i-e;return Math.abs(o)<=n?i:e+Math.sign(i)*n}const y=e=>{e.setGravity(1e3),e.add([e.rect(e.width(),20),e.pos(0,e.height()-20),e.color("#9e9303"),e.area(),e.anchor("top"),e.body({isStatic:!0})]),e.add([e.rect(100,20),e.pos(0,340),e.color("#9e9303"),e.area(),e.anchor("top"),e.body({isStatic:!0})]),e.add([e.rect(100,20),e.pos(150,e.height()-100),e.color("#9e9303"),e.area(),e.anchor("top"),e.body({isStatic:!0})]),e.add([e.rect(100,20),e.pos(400,e.height()-150),e.color("#9e9303"),e.area(),e.anchor("top"),e.body({isStatic:!0})]);const i=h(e,e.vec2(120,0));e.onUpdate(()=>{e.setCamPos(i.pos)})};u.scene("level-1",()=>y(u));u.go("level-1");
//# sourceMappingURL=index-eZKdOlMv.js.map
